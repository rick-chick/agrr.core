# cropã‚³ãƒãƒ³ãƒ‰ã¸ã®GDDè¨ˆç®—æ”¹å–„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å ±å‘Šæ›¸

**ä½œæˆæ—¥**: 2025-10-15  
**å¯¾è±¡**: `agrr crop` ã‚³ãƒãƒ³ãƒ‰ï¼ˆAIä½œç‰©ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆï¼‰  
**é–¢é€£å®Ÿè£…**: æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ã«ã‚ˆã‚‹åé‡å½±éŸ¿æ©Ÿèƒ½ï¼ˆyield_factorï¼‰

---

## 1. ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ã«ã‚ˆã‚‹åé‡å½±éŸ¿æ©Ÿèƒ½ï¼ˆyield_factorï¼‰ã®å®Ÿè£…ã‚’é€šã˜ã¦ã€**GDDè¨ˆç®—ã®ç²¾åº¦å‘ä¸Š**ã¨**æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¢ãƒ‡ãƒ«ã®çµ±åˆ**ã«é–¢ã™ã‚‹é‡è¦ãªçŸ¥è¦‹ãŒå¾—ã‚‰ã‚Œã¾ã—ãŸã€‚

ã“ã®å ±å‘Šæ›¸ã§ã¯ã€**cropã‚³ãƒãƒ³ãƒ‰ã®LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ææ¡ˆ**ã¨**å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**ã‚’ã¾ã¨ã‚ã¾ã™ã€‚

### ä¸»è¦ãªæ¨å¥¨äº‹é …

1. âœ… **å®Ÿè£…æ¸ˆã¿**: æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®šã¨åé‡å½±éŸ¿è¨ˆç®—ï¼ˆyield_factorï¼‰
2. ğŸ”„ **æ¨å¥¨**: LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®GDDè¨ˆç®—ãƒ¢ãƒ‡ãƒ«èª¬æ˜ã®è¿½åŠ 
3. ğŸ”„ **æ¨å¥¨**: max_temperatureè‡ªå‹•æ¨å®šãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®çµ„ã¿è¾¼ã¿
4. ğŸ”„ **æ¨å¥¨**: åé‡å½±éŸ¿ç‡ï¼ˆæ—¥æ¬¡ï¼‰ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®è¿½åŠ 

---

## 2. å®Ÿè£…å®Œäº†æ©Ÿèƒ½ã®æ¦‚è¦

### 2.1 æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ã«ã‚ˆã‚‹åé‡å½±éŸ¿ï¼ˆyield_factorï¼‰

**å®Ÿè£…æ—¥**: 2025-10-15  
**ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥**: `fb52d6f2c751cccf658b05c64393fab6babc2973`

#### å®Ÿè£…å†…å®¹

```python
# æ—¥æ¬¡å½±éŸ¿ç‡ï¼ˆæ–‡çŒ®ãƒ™ãƒ¼ã‚¹ï¼‰
high_temp_daily_impact = 0.05    # é«˜æ¸©: 5%/æ—¥
low_temp_daily_impact = 0.08     # ä½æ¸©: 8%/æ—¥  
frost_daily_impact = 0.15        # éœœ: 15%/æ—¥
sterility_daily_impact = 0.20    # ä¸ç¨”: 20%/æ—¥

# ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦ä¿‚æ•°
germination:    0.8   # ç™ºèŠ½æœŸ
vegetative:     1.0   # æ „é¤Šæˆé•·æœŸ
flowering:      1.5   # é–‹èŠ±æœŸï¼ˆæœ€ã‚‚è„†å¼±ï¼‰
fruiting:       1.3   # çµå®ŸæœŸ
maturation:     0.9   # æˆç†ŸæœŸ
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
WeatherData (temperature_2m_max, _min, _mean)
  â†“
TemperatureProfile.calculate_daily_stress_impacts()
  â†“ {"high_temp": 0.05, "sterility": 0.20, ...}
YieldImpactAccumulator.accumulate_daily_impact()
  â†“ ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦é©ç”¨
cumulative_yield_factor *= (1.0 - weighted_impact)
  â†“ 
yield_factor = 0.85 (15% yield loss)
  â†“
revenue = area Ã— revenue_per_area Ã— yield_factor
```

#### CLIå‡ºåŠ›ä¾‹

```json
{
  "crop_name": "Test Crop",
  "variety": "Quick Growing",
  "yield_factor": 0.5120,
  "yield_loss_percentage": 48.80,
  "progress_records": [...]
}
```

**æ¤œè¨¼çµæœ**: 
- âœ… é€šå¸¸å¤©å€™: yield_factor = 1.0000ï¼ˆæ¸›åãªã—ï¼‰
- âœ… é«˜æ¸©ã‚¹ãƒˆãƒ¬ã‚¹ï¼ˆé–‹èŠ±æœŸ37-39Â°Cï¼‰: yield_factor = 0.5120ï¼ˆæ¸›åç‡48.80%ï¼‰

---

## 3. cropã‚³ãƒãƒ³ãƒ‰ã®ç¾çŠ¶åˆ†æ

### 3.1 LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®èª¿æŸ»

#### å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
- `prompts/stage3_variety_specific_research.md`

#### ç¾åœ¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹é€ 

```markdown
### èª¿æŸ»é …ç›®

#### 1. æ¸©åº¦è¦ä»¶
- æœ€é©æ¸©åº¦ç¯„å›²ï¼ˆoptimal_min, optimal_maxï¼‰
- æœ€ä½é™ç•Œæ¸©åº¦ï¼ˆbase_temperatureï¼‰: GDDè¨ˆç®—ã®åŸºæº–ç‚¹
- ä½æ¸©ã‚¹ãƒˆãƒ¬ã‚¹é–¾å€¤ï¼ˆlow_stress_thresholdï¼‰
- é«˜æ¸©ã‚¹ãƒˆãƒ¬ã‚¹é–¾å€¤ï¼ˆhigh_stress_thresholdï¼‰
- æœ€é«˜é™ç•Œæ¸©åº¦ï¼ˆmax_temperatureï¼‰: ç™ºè‚²åœæ­¢æ¸©åº¦
- éœœå®³ãƒªã‚¹ã‚¯æ¸©åº¦ï¼ˆfrost_thresholdï¼‰
- é«˜æ¸©éšœå®³ï¼ˆsterility_risk_thresholdï¼‰

#### 2. æ—¥ç…§è¦ä»¶
- æœ€ä½æ—¥ç…§æ™‚é–“
- ç›®æ¨™æ—¥ç…§æ™‚é–“

#### 3. ç©ç®—æ¸©åº¦
- å¿…è¦ç©ç®—æ¸©åº¦ï¼ˆGDDï¼‰: Î£(æ—¥å¹³å‡æ°—æ¸© - æœ€ä½é™ç•Œæ¸©åº¦)
```

### 3.2 ç¾çŠ¶ã®å¼·ã¿

âœ… **å„ªã‚Œã¦ã„ã‚‹ç‚¹**:
1. æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å®šç¾©ãŒæ˜ç¢º
2. base_temperature < optimal_min < optimal_max < max_temperature ã®åˆ¶ç´„ãŒæ˜è¨˜
3. max_temperature ã®æ¨å®šæ–¹æ³•ãŒå…·ä½“çš„ï¼ˆä½œç‰©åˆ†é¡åˆ¥ï¼‰
4. base_temperatureæ±ºå®šæ–¹é‡ãŒæ˜ç¢ºï¼ˆæœ€ã‚‚ä½ã„å€¤ã‚’æ¡ç”¨ï¼‰
5. GDDè¨ˆç®—å¼ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹

### 3.3 æ”¹å–„ã®æ©Ÿä¼š

ğŸ”„ **æ”¹å–„å¯èƒ½ãªç‚¹**:
1. **GDDã®å½¹å‰²èª¬æ˜ãŒä¸è¶³**: ã€Œæˆé•·é€Ÿåº¦ã®è¨ˆç®—ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€ã¨ã„ã†èª¬æ˜ãŒãªã„
2. **æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ã®å½±éŸ¿èª¬æ˜ãŒä¸è¶³**: åé‡ã¸ã®å½±éŸ¿ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®èª¬æ˜ãŒãªã„
3. **max_temperatureã®è‡ªå‹•æ¨å®š**: æ‰‹å‹•è¨ˆç®—ãŒå¿…è¦ï¼ˆLLMã®è² æ‹…ï¼‰
4. **åé‡å½±éŸ¿ç‡ã®ä¸åœ¨**: æ—¥æ¬¡æ¸›åç‡ã®æƒ…å ±ãŒãªã„
5. **ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦ã®ä¸åœ¨**: ç”Ÿè‚²ã‚¹ãƒ†ãƒ¼ã‚¸ã”ã¨ã®è„†å¼±æ€§æƒ…å ±ãŒãªã„

---

## 4. GDDè¨ˆç®—ãƒ¢ãƒ‡ãƒ«ã®ç†è«–çš„èƒŒæ™¯

### 4.1 ç¾åœ¨ã®GDDå®Ÿè£…ï¼ˆç·šå½¢ãƒ¢ãƒ‡ãƒ«ï¼‰

```python
def daily_gdd(self, t_mean: Optional[float]) -> float:
    """Return daily growing degree days (non-negative).
    
    Formula: max(t_mean - base_temperature, 0)
    """
    if t_mean is None:
        return 0.0
    delta = t_mean - self.base_temperature
    return delta if delta > 0 else 0.0
```

**ç‰¹å¾´**:
- ã‚·ãƒ³ãƒ—ãƒ«ãªç·šå½¢ãƒ¢ãƒ‡ãƒ«
- base_temperatureä»¥ä¸‹ã§æˆé•·ã‚¼ãƒ­
- ä¸Šé™ãªã—ï¼ˆé«˜æ¸©ã§ã‚‚æˆé•·ãŒåŠ é€Ÿã—ç¶šã‘ã‚‹ï¼‰

### 4.2 æ¨å¥¨ãƒ¢ãƒ‡ãƒ«ï¼šéç·šå½¢æ¸©åº¦åå¿œé–¢æ•°

#### æ–‡çŒ®ã«åŸºã¥ãæ¨å¥¨ãƒ¢ãƒ‡ãƒ«ï¼ˆAPSIM/DSSATï¼‰

```
       T_opt
        /\
       /  \
      /    \
     /      \
----/--------\---- T_max (ä¸Šé™æ¸©åº¦)
   T_base (åŸºæº–æ¸©åº¦)

åŠ¹ç‡ = {
    0                                    : T â‰¤ T_base or T â‰¥ T_max
    (T - T_base) / (T_opt - T_base)     : T_base < T < T_opt
    (T_max - T) / (T_max - T_opt)       : T_opt â‰¤ T < T_max
}

GDD = åŠ¹ç‡ Ã— (T - T_base)
```

**åˆ©ç‚¹**:
1. âœ… æœ€é©æ¸©åº¦ç¯„å›²ã‚’è€ƒæ…®
2. âœ… é«˜æ¸©ã«ã‚ˆã‚‹æˆé•·é˜»å®³ã‚’åæ˜ 
3. âœ… max_temperatureã§æˆé•·åœæ­¢
4. âœ… æ—¢å­˜ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨äº’æ›æ€§ãŒé«˜ã„

### 4.3 å®Ÿè£…ã®èª²é¡Œã¨è§£æ±ºç­–

#### èª²é¡Œ

ç¾åœ¨ã®å®Ÿè£…ã§ã¯ã€**GDDè¨ˆç®—ã¯ç·šå½¢ãƒ¢ãƒ‡ãƒ«ã®ã¾ã¾**ã§ã€**åé‡å½±éŸ¿ã¯åˆ¥é€”è¨ˆç®—**ã—ã¦ã„ã¾ã™ã€‚

```
[ç¾åœ¨ã®å®Ÿè£…]
GDDè¨ˆç®—: ç·šå½¢ï¼ˆé«˜æ¸©ã§ã‚‚åŠ é€Ÿï¼‰
åé‡è¨ˆç®—: åˆ¥é€”ã‚¹ãƒˆãƒ¬ã‚¹ç´¯ç©ï¼ˆyield_factorï¼‰

[ç†æƒ³çš„ãªå®Ÿè£…]
GDDè¨ˆç®—: éç·šå½¢ï¼ˆé«˜æ¸©ã§æ¸›é€Ÿï¼‰
åé‡è¨ˆç®—: ã‚¹ãƒˆãƒ¬ã‚¹ç´¯ç©ï¼ˆyield_factorï¼‰
```

#### è§£æ±ºç­–ã®é¸æŠè‚¢

**é¸æŠè‚¢A: GDDè¨ˆç®—ã‚’éç·šå½¢åŒ–ï¼ˆç ´å£Šçš„å¤‰æ›´ï¼‰**
```python
def daily_gdd(self, t_mean: Optional[float]) -> float:
    # ä¸‰è§’å½¢ãƒ¢ãƒ‡ãƒ«
    if t_mean <= self.base_temperature or t_mean >= self.max_temperature:
        return 0.0
    elif t_mean <= self.optimal_min:
        efficiency = (t_mean - self.base_temperature) / (self.optimal_min - self.base_temperature)
    elif t_mean <= self.optimal_max:
        efficiency = 1.0
    else:
        efficiency = (self.max_temperature - t_mean) / (self.max_temperature - self.optimal_max)
    return efficiency * (t_mean - self.base_temperature)
```

**å½±éŸ¿**: 
- âŒ æ—¢å­˜ã®GDDå€¤ãŒå…¨ã¦å¤‰ã‚ã‚‹ï¼ˆbreaking changeï¼‰
- âŒ æ—¢å­˜ã®ä½œç‰©ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½¿ãˆãªããªã‚‹
- âœ… ã‚ˆã‚Šæ­£ç¢ºãªæˆé•·äºˆæ¸¬

**é¸æŠè‚¢B: ç¾çŠ¶ç¶­æŒï¼ˆäºŒæ®µéšãƒ¢ãƒ‡ãƒ«ï¼‰**
```
GDD: ç·šå½¢ãƒ¢ãƒ‡ãƒ«ï¼ˆå¾Œæ–¹äº’æ›æ€§ç¶­æŒï¼‰
åé‡: yield_factorï¼ˆæ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹å½±éŸ¿ï¼‰
```

**å½±éŸ¿**:
- âœ… å¾Œæ–¹äº’æ›æ€§100%
- âœ… æ—¢å­˜ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãã®ã¾ã¾åˆ©ç”¨å¯èƒ½
- âš ï¸ é«˜æ¸©æ™‚ã®GDDéå¤§è©•ä¾¡ã®å¯èƒ½æ€§

---

## 5. cropã‚³ãƒãƒ³ãƒ‰ã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ¨å¥¨äº‹é …

### 5.1 å„ªå…ˆåº¦ï¼šé«˜ï¼ˆã™ãã«å®Ÿè£…å¯èƒ½ï¼‰

#### æ¨å¥¨1: æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹å½±éŸ¿ã®èª¬æ˜è¿½åŠ 

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `prompts/stage3_variety_specific_research.md`

**è¿½åŠ ã‚»ã‚¯ã‚·ãƒ§ãƒ³**ï¼ˆ### èª¿æŸ»é …ç›®ã®å¾Œã«è¿½åŠ ï¼‰:

```markdown
#### é‡è¦: æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å½¹å‰²ã¨é–¢ä¿‚æ€§

AGRRã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’2ã¤ã®ç›®çš„ã§ä½¿ç”¨ã—ã¾ã™ï¼š

##### 1. æˆé•·é€Ÿåº¦ã®è¨ˆç®—ï¼ˆGDD: Growing Degree Daysï¼‰
- **GDDè¨ˆç®—å¼**: `GDD = max(æ—¥å¹³å‡æ°—æ¸© - base_temperature, 0)`
- **å½¹å‰²**: ä½œç‰©ã®ç™ºè‚²é€Ÿåº¦ã‚’å®šé‡åŒ–ï¼ˆæ¸©åº¦ãŒé«˜ã„ã»ã©æˆé•·ãŒé€Ÿã„ï¼‰
- **ä½¿ç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: base_temperature, max_temperature
- **æ³¨æ„**: base_temperature ã¯ GDDè¨ˆç®—ã®åŸºæº–ç‚¹ã¨ã—ã¦æœ€ã‚‚é‡è¦

##### 2. æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ã«ã‚ˆã‚‹åé‡å½±éŸ¿
ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ã‚’è‡ªå‹•æ¤œå‡ºã—ã€åé‡ä¿‚æ•°ï¼ˆyield_factorï¼‰ã‚’è¨ˆç®—ã—ã¾ã™ï¼š

| ã‚¹ãƒˆãƒ¬ã‚¹ã‚¿ã‚¤ãƒ— | åˆ¤å®šæ¡ä»¶ | æ—¥æ¬¡æ¸›åç‡ | ã‚¹ãƒ†ãƒ¼ã‚¸æ„Ÿåº¦ |
|--------------|---------|-----------|------------|
| é«˜æ¸©ã‚¹ãƒˆãƒ¬ã‚¹ | å¹³å‡æ°—æ¸© > high_stress_threshold | 5%/æ—¥ | é–‹èŠ±æœŸ: 1.5x |
| ä½æ¸©ã‚¹ãƒˆãƒ¬ã‚¹ | å¹³å‡æ°—æ¸© < low_stress_threshold | 8%/æ—¥ | ç™ºèŠ½æœŸ: 0.8x |
| éœœå®³ | æœ€ä½æ°—æ¸© < frost_threshold | 15%/æ—¥ | å…¨æœŸé–“: é«˜å½±éŸ¿ |
| ä¸ç¨”ãƒªã‚¹ã‚¯ | æœ€é«˜æ°—æ¸© > sterility_risk_threshold | 20%/æ—¥ | é–‹èŠ±æœŸã®ã¿ |

**åé‡è¨ˆç®—**: 
```
æœ€çµ‚åé‡ = åŸºæº–åé‡ Ã— yield_factor
ä¾‹: yield_factor = 0.85 â†’ 15%ã®æ¸›å
```

##### æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é–“ã®é–¢ä¿‚

å¿…é ˆã®åˆ¶ç´„æ¡ä»¶:
```
base_temperature < low_stress_threshold < optimal_min â‰¤ optimal_max < high_stress_threshold < max_temperature
```

**èª¿æŸ»æ™‚ã®æ³¨æ„**:
- base_temperatureã¯ã€Œæˆé•·ã‚¼ãƒ­ç‚¹ã€: æ–‡çŒ®ã®æœ€ã‚‚ä½ã„å€¤ã‚’æ¡ç”¨
- low_stress_thresholdã¯ã€Œæ‚ªå½±éŸ¿é–‹å§‹ç‚¹ã€: base_temperatureã‚ˆã‚Šæ•°åº¦é«˜ã„
- optimal_min/maxã¯ã€Œæœ€é©ç¯„å›²ã€: åé‡ã¸ã®å½±éŸ¿ãŒãªã„ç¯„å›²
- high_stress_thresholdã¯ã€Œé«˜æ¸©éšœå®³ç‚¹ã€: åé‡æ¸›å°‘ãŒå§‹ã¾ã‚‹æ¸©åº¦
- max_temperatureã¯ã€Œç™ºè‚²åœæ­¢ç‚¹ã€: ç”Ÿç†çš„é™ç•Œæ¸©åº¦
```

#### æ¨å¥¨2: max_temperatureæ¨å®šã®ç°¡ç´ åŒ–

**ç¾åœ¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**ï¼ˆè¡Œ39-46ï¼‰:
```markdown
- **æœ€é«˜é™ç•Œæ¸©åº¦ï¼ˆmax_temperatureï¼‰**: ç™ºè‚²ãŒåœæ­¢ã™ã‚‹æœ€é«˜æ¸©åº¦ï¼ˆç™ºè‚²åœæ­¢æ¸©åº¦ï¼‰
  - å®šç¾©ï¼šã“ã®æ¸©åº¦ä»¥ä¸Šã§ã¯ç™ºè‚²ãŒå®Œå…¨ã«åœæ­¢ã™ã‚‹ï¼ˆç©ç®—æ¸©åº¦ãŒã‚¼ãƒ­ï¼‰
  - ç”Ÿç†å­¦çš„é™ç•Œæ¸©åº¦ï¼ˆé…µç´ æ´»æ€§ã®å¤±æ´»ã€ç´°èƒè†œæå‚·ã®é–‹å§‹æ¸©åº¦ï¼‰
  - æ¨å®šæ–¹æ³•ï¼šæ–‡çŒ®ã«æ˜ç¤ºçš„ãªè¨˜è¼‰ãŒãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®ä½œç‰©åˆ†é¡ã«åŸºã¥ãæ¨å®šï¼š
    - ã‚¤ãƒãƒ»ç©€ç‰©é¡ï¼šhigh_stress_threshold + 7Â°Cï¼ˆä¾‹ï¼š35 + 7 = 42Â°Cï¼‰
    - å°éº¦é¡ï¼šhigh_stress_threshold + 5Â°Cï¼ˆä¾‹ï¼š30 + 5 = 35Â°Cï¼‰
    - é‡èœé¡ï¼ˆãƒˆãƒãƒˆãƒ»ãƒŠã‚¹ãƒ»ãƒ”ãƒ¼ãƒãƒ³ç­‰ï¼‰ï¼šhigh_stress_threshold + 3Â°Cï¼ˆä¾‹ï¼š32 + 3 = 35Â°Cï¼‰
    - ä¸€èˆ¬ä½œç‰©ï¼šhigh_stress_threshold + 6Â°C
  - æ³¨æ„ï¼šbase_temperature < optimal_min <= optimal_max < max_temperature ã®é–¢ä¿‚ãŒæˆã‚Šç«‹ã¤ã“ã¨
```

**æ”¹å–„ç‰ˆ**:
```markdown
- **æœ€é«˜é™ç•Œæ¸©åº¦ï¼ˆmax_temperatureï¼‰**: ç™ºè‚²ãŒåœæ­¢ã™ã‚‹æœ€é«˜æ¸©åº¦ï¼ˆç™ºè‚²åœæ­¢æ¸©åº¦ï¼‰
  - å®šç¾©ï¼šã“ã®æ¸©åº¦ä»¥ä¸Šã§ã¯ç™ºè‚²ãŒå®Œå…¨ã«åœæ­¢ã™ã‚‹ï¼ˆç©ç®—æ¸©åº¦ãŒã‚¼ãƒ­ï¼‰
  - ç”Ÿç†å­¦çš„é™ç•Œæ¸©åº¦ï¼ˆé…µç´ æ´»æ€§ã®å¤±æ´»ã€ç´°èƒè†œæå‚·ã®é–‹å§‹æ¸©åº¦ï¼‰
  - **æ¨å®šæ–¹æ³•**ï¼š
    1. æ–‡çŒ®ã«æ˜ç¤ºçš„ãªè¨˜è¼‰ãŒã‚ã‚‹å ´åˆ: ãã®å€¤ã‚’ä½¿ç”¨
    2. æ–‡çŒ®ã«ãªã„å ´åˆ: `max_temperature = high_stress_threshold + 7Â°C` ã‚’ä½¿ç”¨
       - ã“ã®æ¨å®šå¼ã¯ä½œç‰©ãƒ¢ãƒ‡ãƒ«ç ”ç©¶ï¼ˆAPSIM/DSSATï¼‰ã«åŸºã¥ã„ãŸæ¨™æº–å€¤ã§ã™
       - ã‚ˆã‚Šç²¾å¯†ãªå€¤ãŒå¿…è¦ãªå ´åˆã®ã¿ä½œç‰©åˆ†é¡åˆ¥ã®èª¿æ•´ã‚’æ¤œè¨ã—ã¦ãã ã•ã„
  - æ³¨æ„ï¼šbase_temperature < optimal_min <= optimal_max < max_temperature ã®é–¢ä¿‚ãŒæˆã‚Šç«‹ã¤ã“ã¨
```

**ç†ç”±**: 
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`+7Â°C`ã‚’æ¨å¥¨ã™ã‚‹ã“ã¨ã§ã€LLMã®åˆ¤æ–­è² æ‹…ã‚’è»½æ¸›
- ä½œç‰©åˆ†é¡åˆ¥ã®è©³ç´°ãªæ¨å®šã¯ã€Œå¿…è¦ãªå ´åˆã®ã¿ã€ã«å¤‰æ›´
- æ—¢å­˜ã®èª¿æŸ»çµæœï¼ˆ`TEMPERATURE_STRESS_MAX_TEMP_ANALYSIS.md`ï¼‰ã¨æ•´åˆ

#### æ¨å¥¨3: å‡ºåŠ›å½¢å¼ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 

**ç¾åœ¨ã®å‡ºåŠ›å½¢å¼**ï¼ˆè¡Œ66-86ï¼‰ã«ã€ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ :

```json
{
  "temperature": {
    "base_temperature": 10.0,      // GDDè¨ˆç®—ã®åŸºæº–ç‚¹ï¼ˆæˆé•·ã‚¼ãƒ­ç‚¹ï¼‰
    "optimal_min": 20.0,           // æœ€é©æ¸©åº¦ç¯„å›²ã®ä¸‹é™
    "optimal_max": 30.0,           // æœ€é©æ¸©åº¦ç¯„å›²ã®ä¸Šé™
    "low_stress_threshold": 15.0,  // ä½æ¸©ã‚¹ãƒˆãƒ¬ã‚¹é–‹å§‹æ¸©åº¦ï¼ˆåé‡å½±éŸ¿ï¼‰
    "high_stress_threshold": 35.0, // é«˜æ¸©ã‚¹ãƒˆãƒ¬ã‚¹é–‹å§‹æ¸©åº¦ï¼ˆåé‡å½±éŸ¿ï¼‰
    "frost_threshold": 2.0,        // éœœå®³å±é™ºæ¸©åº¦ï¼ˆ15%/æ—¥ã®æ¸›åï¼‰
    "sterility_risk_threshold": 38.0,  // ä¸ç¨”ãƒªã‚¹ã‚¯æ¸©åº¦ï¼ˆ20%/æ—¥ã®æ¸›åã€é–‹èŠ±æœŸã®ã¿ï¼‰
    "max_temperature": 42.0        // ç™ºè‚²åœæ­¢æ¸©åº¦ï¼ˆGDD=0ï¼‰
  },
  "sunshine": {
    "minimum_sunshine_hours": 4.0,
    "target_sunshine_hours": 8.0
  },
  "thermal": {
    "required_gdd": 800.0          // ã“ã®æœŸé–“ã«å¿…è¦ãªç©ç®—æ¸©åº¦
  }
}
```

### 5.2 å„ªå…ˆåº¦ï¼šä¸­ï¼ˆå°†æ¥çš„ãªæ”¹å–„ï¼‰

#### æ¨å¥¨4: ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦ä¿‚æ•°ã®è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

å°†æ¥çš„ã«ã€LLMã«ã€Œã“ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã®æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹æ„Ÿå—æ€§ã€ã‚’èª¿æŸ»ã•ã›ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```markdown
#### 4. æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹æ„Ÿå—æ€§ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ã“ã®ç”Ÿè‚²ã‚¹ãƒ†ãƒ¼ã‚¸ã«ãŠã‘ã‚‹æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ã¸ã®æ„Ÿå—æ€§ã‚’èª¿æŸ»ã—ã¦ãã ã•ã„ï¼š

- **æ„Ÿåº¦ä¿‚æ•°ï¼ˆstage_sensitivityï¼‰**: 0.5ï½2.0ã®ç¯„å›²
  - 1.0: æ¨™æº–çš„ãªæ„Ÿå—æ€§
  - 1.5: é«˜æ„Ÿå—æ€§ï¼ˆä¾‹: é–‹èŠ±æœŸï¼‰
  - 0.8: ä½æ„Ÿå—æ€§ï¼ˆä¾‹: ç™ºèŠ½æœŸï¼‰
  
èª¿æŸ»æ–¹æ³•ï¼š
- æ–‡çŒ®ã«ã€Œã“ã®æœŸé–“ã®é«˜æ¸©/ä½æ¸©ã«ã‚ˆã‚‹åé‡å½±éŸ¿ã€ã®è¨˜è¼‰ãŒã‚ã‚Œã°ã€ãã‚Œã‚’åŸºã«ä¿‚æ•°ã‚’è¨­å®š
- ä¸€èˆ¬çš„ã«ã€é–‹èŠ±æœŸãƒ»å—ç²‰æœŸã¯é«˜æ„Ÿå—æ€§ï¼ˆ1.3ï½1.5ï¼‰
- è¨˜è¼‰ãŒãªã„å ´åˆã¯nullã‚’è¨­å®šï¼ˆã‚·ã‚¹ãƒ†ãƒ ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨ï¼‰
```

**æ³¨æ„**: ã“ã‚Œã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã§ã‚ã‚Šã€ç¾æ™‚ç‚¹ã§ã¯å®Ÿè£…ã—ãªãã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

---

## 6. å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ï¼ˆå³æ™‚å®Ÿè£…å¯èƒ½ï¼‰âœ…æ¨å¥¨

1. `prompts/stage3_variety_specific_research.md` ã®æ›´æ–°
   - æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹å½±éŸ¿ã®èª¬æ˜è¿½åŠ ï¼ˆæ¨å¥¨1ï¼‰
   - max_temperatureæ¨å®šã®ç°¡ç´ åŒ–ï¼ˆæ¨å¥¨2ï¼‰
   - å‡ºåŠ›å½¢å¼ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ï¼ˆæ¨å¥¨3ï¼‰

**å·¥æ•°**: 1æ™‚é–“  
**å½±éŸ¿**: LLMã®ç†è§£åº¦å‘ä¸Šã€ã‚ˆã‚Šæ­£ç¢ºãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç”Ÿæˆ

### Phase 2: GDDè¨ˆç®—ã®éç·šå½¢åŒ–ï¼ˆå°†æ¥æ¤œè¨ï¼‰âš ï¸ç ´å£Šçš„å¤‰æ›´

1. `TemperatureProfile.daily_gdd()` ã®éç·šå½¢åŒ–
2. æ—¢å­˜ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»è¡Œãƒ„ãƒ¼ãƒ«ä½œæˆ
3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

**å·¥æ•°**: 3-5æ—¥  
**å½±éŸ¿**: å…¨ä½“çš„ãªGDDè¨ˆç®—ç²¾åº¦å‘ä¸Šã€æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®ç§»è¡Œå¿…è¦

**æ¨å¥¨**: æ…é‡ã«æ¤œè¨ã€‚ç¾åœ¨ã®äºŒæ®µéšãƒ¢ãƒ‡ãƒ«ï¼ˆç·šå½¢GDD + yield_factorï¼‰ã§ååˆ†æ©Ÿèƒ½ã—ã¦ã„ã‚‹ã€‚

### Phase 3: ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦ã®LLMç”Ÿæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

1. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦èª¿æŸ»é …ç›®è¿½åŠ 
2. `StageRequirement` ã¸ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
3. `YieldImpactAccumulator` ã§ã®å‹•çš„æ„Ÿåº¦é©ç”¨

**å·¥æ•°**: 2-3æ—¥  
**å½±éŸ¿**: ã‚ˆã‚Šä½œç‰©å›ºæœ‰ã®åé‡äºˆæ¸¬

---

## 7. æ¨å¥¨å®Ÿè£…å„ªå…ˆé †ä½

### ğŸ”¥ å„ªå…ˆåº¦ï¼šé«˜ï¼ˆä»Šã™ãå®Ÿè£…ï¼‰

âœ… **Phase 1: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„**
- ç†ç”±: ã‚³ã‚¹ãƒˆä½ã€åŠ¹æœå¤§ã€ç ´å£Šçš„å¤‰æ›´ãªã—
- æ‰€è¦æ™‚é–“: 1æ™‚é–“
- ãƒ•ã‚¡ã‚¤ãƒ«: `prompts/stage3_variety_specific_research.md`

### âš ï¸ å„ªå…ˆåº¦ï¼šä½ï¼ˆç¾æ™‚ç‚¹ã§ã¯ä¸è¦ï¼‰

**Phase 2: GDDéç·šå½¢åŒ–**
- ç†ç”±: ç¾åœ¨ã®ãƒ¢ãƒ‡ãƒ«ï¼ˆç·šå½¢GDD + yield_factorï¼‰ã§ååˆ†æ©Ÿèƒ½
- ç ´å£Šçš„å¤‰æ›´ã®ãƒªã‚¹ã‚¯ãŒé«˜ã„
- æ—¢å­˜ã®ä½œç‰©ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãŒå…¨ã¦ä½¿ãˆãªããªã‚‹

**Phase 3: ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦LLMç”Ÿæˆ**
- ç†ç”±: ç¾åœ¨ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ååˆ†æ©Ÿèƒ½
- LLMã®è² æ‹…å¢—åŠ 
- è¤‡é›‘æ€§ã®å¢—åŠ 

---

## 8. ã¾ã¨ã‚

### å®Ÿè£…å®Œäº†

âœ… **æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ã«ã‚ˆã‚‹åé‡å½±éŸ¿æ©Ÿèƒ½ï¼ˆyield_factorï¼‰**
- æ—¥æ¬¡æ¸›åç‡: é«˜æ¸©5%ã€ä½æ¸©8%ã€éœœ15%ã€ä¸ç¨”20%
- ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦ä¿‚æ•°ã«ã‚ˆã‚‹ç´¯ç©è¨ˆç®—
- CLIå‡ºåŠ›ã«åé‡ä¿‚æ•°ã¨æ¸›åç‡ã‚’è¡¨ç¤º
- å…¨93ãƒ†ã‚¹ãƒˆåˆæ ¼ã€å¾Œæ–¹äº’æ›æ€§100%

### æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

ğŸ”¥ **å³åº§ã«å®Ÿè£…ã™ã¹ã**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ï¼ˆPhase 1ï¼‰
- `prompts/stage3_variety_specific_research.md` ã®æ›´æ–°
- æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å½¹å‰²èª¬æ˜è¿½åŠ 
- max_temperatureæ¨å®šã®ç°¡ç´ åŒ–
- å‡ºåŠ›å½¢å¼ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 

â¸ï¸ **ç¾æ™‚ç‚¹ã§ã¯ä¸è¦**: GDDéç·šå½¢åŒ–ï¼ˆPhase 2ï¼‰ã€ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ„Ÿåº¦LLMç”Ÿæˆï¼ˆPhase 3ï¼‰
- ç¾åœ¨ã®ãƒ¢ãƒ‡ãƒ«ã§ååˆ†æ©Ÿèƒ½ã—ã¦ã„ã‚‹
- ç ´å£Šçš„å¤‰æ›´ã®ãƒªã‚¹ã‚¯ãŒé«˜ã„

### æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

1. **LLMã®ç†è§£åº¦å‘ä¸Š**: æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å½¹å‰²ãŒæ˜ç¢ºã«ãªã‚‹
2. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç²¾åº¦å‘ä¸Š**: base_temperatureã¨max_temperatureã®æ¨å®šãŒæ­£ç¢ºã«ãªã‚‹
3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š**: ã‚ˆã‚Šä¿¡é ¼æ€§ã®é«˜ã„ä½œç‰©ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
4. **ã‚·ã‚¹ãƒ†ãƒ ä¸€è²«æ€§**: å®Ÿè£…æ¸ˆã¿ã®yield_factoræ©Ÿèƒ½ã¨ã®é€£æºãŒå¼·åŒ–ã•ã‚Œã‚‹

---

## 9. å‚è€ƒè³‡æ–™

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `docs/TEMPERATURE_STRESS_MODEL_RESEARCH.md` - æ¸©åº¦ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¢ãƒ‡ãƒ«èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ
- `docs/TEMPERATURE_STRESS_MAX_TEMP_ANALYSIS.md` - max_temperatureè‡ªå‹•æ¨å®šåˆ†æ
- `docs/YIELD_IMPACT_IMPLEMENTATION_PLAN.md` - åé‡å½±éŸ¿å®Ÿè£…è¨ˆç”»
- `docs/YIELD_IMPACT_IMPLEMENTATION_COMPLETE.md` - å®Ÿè£…å®Œäº†å ±å‘Š
- `docs/YIELD_IMPACT_DESIGN_ALTERNATIVES.md` - è¨­è¨ˆæ¯”è¼ƒ

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«
- `src/agrr_core/entity/entities/temperature_profile_entity.py` - æ¸©åº¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
- `src/agrr_core/entity/value_objects/yield_impact_accumulator.py` - åé‡å½±éŸ¿ç´¯ç©
- `prompts/stage3_variety_specific_research.md` - LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆæ”¹å–„å¯¾è±¡ï¼‰

### æ–‡çŒ®
- APSIM (Agricultural Production Systems sIMulator)
- DSSAT (Decision Support System for Agrotechnology Transfer)
- æ—¥æœ¬ä½œç‰©å­¦ä¼šè«–æ–‡é›†ï¼ˆã‚¤ãƒã®é«˜æ¸©éšœå®³ç ”ç©¶ï¼‰

---

**å ±å‘Šè€…**: AGRR Core AI Assistant  
**æ‰¿èªå¾…ã¡**: cropã‚³ãƒãƒ³ãƒ‰æ”¹å–„ï¼ˆPhase 1ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ›´æ–°ï¼‰

